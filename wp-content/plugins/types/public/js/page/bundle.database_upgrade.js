!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){e.exports=window.wp.i18n},function(e,t,r){var n=r(11);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(12),a=r(9);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=window.wp.element},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=ReactDOM},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){e.exports=window.wp.compose},function(e,t,r){e.exports=r(22)},function(e,t){function r(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)}))}}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=((n=r(23))&&n.__esModule?n:{default:n}).default;t.default=a},,,,,,function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return E()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function p(){}function f(){}function h(){}var d={};d[a]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(R([])));y&&y!==t&&r.call(y,a)&&(d=y);var g=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var s=u(e[a],e,o);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=g.constructor=h,h.constructor=f,f.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(b.prototype),b.prototype[o]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new b(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),c(g,i,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(24)),o=(n=r(25))&&n.__esModule?n:{default:n};function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=u(this,l(t).call(this,e));var n=new Date;return r.state={decreseKey:0,percentages:[],startedTime:n.getTime()},e.decreaseTime&&window.setInterval((function(){var e=r.state.decreseKey;r.setState({decreseKey:e+1})}),1e3),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"componentDidUpdate",value:function(e){var t=this.state.percentages;if(this.props.percentage!==e.percentage){var r=new Date;t.push({percentage:this.props.percentage,time:r.getTime()})}}},{key:"render",value:function(){var e,t=this.props,r=t.percentage,n=t.initialText,a=t.completedText,i=t.calculateByAverage,c=t.formatter,s=t.decreaseTime,u=t.format,l=t.rollingAverageWindowSize,p=this.state,f=p.percentages,h=p.startedTime;if(r<=0||f.length<2)return n;if(r>=100)return a;var d=f[f.length-1];if(i)e=(d.time-h)/d.percentage*(100-d.percentage);else{var m=f[Math.max(0,f.length-(l||1)-1)];e=(d.time-m.time)/(d.percentage-m.percentage)*(100-r)}return isNaN(e)?n:(s&&(e-=(new Date).getTime()-d.time)<0&&(e=0),c?c(e):u?(0,o.default)(e,r,u):null)}}])&&s(r.prototype,n),a&&s(r,a),t}(a.Component);t.default=f,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(f,"defaultProps",{calculateByAverage:!1,completedText:"Completed",decreaseTime:!0,format:"Completing in {value} {unit}",initialText:"Initializing",rollingAverageWindowSize:1})},function(e,t){e.exports=React},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t,r){var n=Math.ceil(e/1e3),a="second(s)",o=n;return n>31104e3?(o/=31104e3,a="year(s)"):n>2592e3?(o/=2592e3,a="month(s)"):n>86400?(o/=86400,a="day(s)"):n>3600?(o/=3600,a="hour(s)"):n>60&&(o/=60,a="minute(s)"),r.replace("{value}",Math.ceil(o).toString()).replace("{unit}",a).replace("{percentage}",Math.round(t).toString())}},function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(1),i=r.n(o),c=r(7),s=r.n(c),u=r(15),l=r.n(u),p=r(4),f=r.n(p),h=r(5),d=r.n(h),m=r(2),y=r.n(m),g=r(14),v=r.n(g),b=r(8),w=r(13),S=r(3),_=r(6);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var R,E=function(e){f()(r,e);var t=O(r);function r(e){var n;return a()(this,r),(n=t.call(this,e)).logOutputTextarea=null,n.setLogOutputTextareaRef=function(e){return n.logOutputTextarea=e},n.scrollDownLogOutputTextarea=function(){n.logOutputTextarea&&(n.logOutputTextarea.scrollTop=n.logOutputTextarea.scrollHeight)},n}return i()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.isExpanded,n=t.shouldForceExpand,a=r||n;return React.createElement("div",{className:"types-technical-information"},React.createElement("div",null,React.createElement("label",{htmlFor:"logOutput",onClick:function(){return e.props.setState({isExpanded:!r})}},!n&&React.createElement("i",{"aria-hidden":"true",className:"fa "+(a?"fa-caret-up":"fa-caret-down")}),React.createElement("small",null," ",Object(S.__)("Technical information","wpcf")))),a&&React.createElement("div",null,React.createElement("textarea",{name:"logOutput",rows:20,readOnly:!0,ref:this.setLogOutputTextareaRef,value:this.props.logOutput})))}},{key:"componentDidUpdate",value:function(){this.scrollDownLogOutputTextarea()}}]),r}(b.Component),x=Object(w.compose)(Object(w.withState)({isExpanded:!1}))(E),j=1,L=2,T=3,P=4,k=5,C={error:k,warning:P,success:T};function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var M=(R={},s()(R,j,{className:"",color:""}),s()(R,L,{className:"fa fa-spinner fa-spin fa-lg",color:""}),s()(R,P,{className:"fa fa-exclamation-triangle fa-lg",color:"orange"}),s()(R,k,{className:"fa fa-times fa-lg",color:"red"}),s()(R,T,{className:"fa fa-check fa-lg",color:"#289d40"}),R),D=function(e){f()(r,e);var t=N(r);function r(){return a()(this,r),t.apply(this,arguments)}return i()(r,[{key:"render",value:function(){var e=this.props,t=e.label,r=e.stepState,n=e.estimation,a=this.parseStepState(r);return React.createElement("li",null,React.createElement("span",{className:"types-step__list-row-label",style:{color:M[a].color}},t),React.createElement("span",{className:"types-step__list-row-estimation"},n),React.createElement("span",{className:"types-step__list-row-icon"},React.createElement("i",{className:M[a].className,style:{color:M[a].color}})))}},{key:"parseStepState",value:function(e){return e.isRunning?L:e.stepState}}]),r}(b.Component),U=function(e){return React.createElement(_.Icon,{size:e.size,icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 121.98 121.98"},React.createElement("g",null,React.createElement("path",{fill:"#ed793e",d:"M117.72,91.31l3.85-3.85a1.23,1.23,0,0,0,0-1.83l-6.42-6.42a1.23,1.23,0,0,0-1.83,0l-3.85,3.85-3.85-3.85,3.85-3.85a1.23,1.23,0,0,0,0-1.83L103,67.1a1.23,1.23,0,0,0-1.83,0L97.36,71,93.42,67a1.23,1.23,0,0,0-1.83,0L67,91.59a1.23,1.23,0,0,0,0,1.83l27.69,27.69.46.46a1.23,1.23,0,0,0,1.83,0L121.57,97a1.3,1.3,0,0,0,0-1.83ZM114.88,94,117,96.08,96.08,117,71.51,92.41,92.6,71.32l4.77,4.77L102,71.41,105,74.35l-4.77,4.77,9.17,9.17,4.77-4.77,2.93,2.93-4.86,4.86Z"}),React.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.9s",dur:"1.2s",repeatCount:"indefinite"})),React.createElement("g",null,React.createElement("path",{fill:"#ed793e",d:"M93,57a1.23,1.23,0,0,0,1.83,0l24.57-24.57a1.3,1.3,0,0,0,0-1.83l-3.85-3.85,3.85-3.85a1.23,1.23,0,0,0,0-1.83L113,14.67a1.23,1.23,0,0,0-1.83,0l-3.85,3.85-3.85-3.85,3.85-3.85a1.23,1.23,0,0,0,0-1.83l-6.42-6.42a1.23,1.23,0,0,0-1.83,0L95.17,6.41,91.23,2.47a1.23,1.23,0,0,0-1.83,0L64.82,27a1.23,1.23,0,0,0,0,1.83L92.52,56.57ZM90.41,6.78l4.77,4.77,4.68-4.68,2.93,2.93L98,14.57l9.17,9.17L112,19l2.93,2.93L110,26.77l2.66,2.66,2.11,2.11L93.89,52.44,69.32,27.87Z"}),React.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.3s",dur:"1.2s",repeatCount:"indefinite"})),React.createElement("g",null,React.createElement("path",{fill:"#ed793e",d:"M55,19l-6.42-6.42a1.23,1.23,0,0,0-1.83,0l-3.85,3.85L39,12.61l3.85-3.85a1.23,1.23,0,0,0,0-1.83L36.45.5a1.23,1.23,0,0,0-1.83,0L30.76,4.36,26.82.41A1.23,1.23,0,0,0,25,.41L.41,25a1.23,1.23,0,0,0,0,1.83L28.1,54.51l.46.46a1.23,1.23,0,0,0,1.83,0L55,30.4a1.3,1.3,0,0,0,0-1.83l-3.85-3.85L55,20.86A1.23,1.23,0,0,0,55,19Zm-6.69,8.34,2.11,2.11L29.48,50.39,4.91,25.81,26,4.72l4.77,4.77,4.68-4.68,2.93,2.93-4.77,4.77,9.17,9.17,4.77-4.77,2.93,2.93-4.86,4.86Z"}),React.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0s",dur:"1.2s",repeatCount:"indefinite"})))})},z=function(e){return React.createElement(_.Icon,{size:e.size,icon:React.createElement("svg",{viewBox:"0 0 804 804",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M595.092 274.151C595.092 267.561 589.82 262.289 583.23 262.289H533.804V212.863C534.463 206.931 529.19 201.659 523.259 201C522.6 201 522.6 201 521.941 201H439.564C433.633 200.341 428.361 205.613 427.702 211.545C427.702 212.204 427.702 212.204 427.702 212.863V262.289H378.276V212.863C378.935 206.931 373.663 201.659 367.731 201C367.072 201 367.072 201 366.413 201H283.377C277.446 200.341 272.174 205.613 271.515 211.545C271.515 212.204 271.515 212.204 271.515 212.863L270.856 262.948H220.112C214.181 262.289 208.908 267.561 208.249 273.492C208.249 274.151 208.249 274.151 208.249 274.81V591.138C207.59 597.069 212.863 602.341 218.794 603C219.453 603 219.453 603 220.112 603H577.299H583.23C589.161 603.659 594.433 598.387 595.092 592.456C595.092 591.797 595.092 591.797 595.092 591.138V274.151ZM243.177 567.413V295.899H304.466V235.928H342.689V297.217H460.653L461.312 235.269H498.876L498.217 298.535H532.486H559.505V567.413H243.177Z",fill:"#ED793E"}),React.createElement("path",{d:"M477.787 401.341L392.774 486.354C386.184 492.945 376.298 492.945 369.708 486.354L326.213 442.2C319.623 435.61 319.623 425.725 326.213 419.135C332.803 412.544 342.689 412.544 349.279 419.135L381.571 451.426L454.721 378.276C461.312 371.685 471.197 371.685 477.787 378.276C483.718 384.866 483.718 394.751 477.787 401.341Z",fill:"#ED793E"}))})},B=window.toolsetTypesDatabaseUpgradePageL10n;var A=r(16),H=r.n(A);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var F=function(e){f()(r,e);var t=I(r);function r(){return a()(this,r),t.apply(this,arguments)}return i()(r,[{key:"render",value:function(){return React.createElement(H.a,{percentage:this.getProgressPercentage(),initialText:Object(S.__)("estimating...","wpcf"),completedText:Object(S.__)("completed","wpcf"),format:"{value} {unit} "+Object(S.__)("remaining","wpcf")+" ({percentage}%)",calculateByAverage:!1,rollingAverageWindowSize:20})}},{key:"getProgressPercentage",value:function(){var e=this.props,t=e.currentSubstep,r=e.substepCount;return!t||t<1||!r||r<1?0:t/r*100}}]),r}(b.Component);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var Z=function(){return JSON.parse(JSON.stringify({currentStep:0,stepStates:Array(8).fill({isRunning:!1,stepState:j}),worstState:T,lastWorstState:T,isUpgradeRunning:!0}))},Y=function(e){f()(n,e);var t,r=G(n);function n(){return a()(this,n),r.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this,t=this.props,r=t.supportForumURL,n=t.returnToUrl,a=t.returnToTitle,o=t.stepStates,i=t.logOutput,c=t.isUpgradeRunning,s=t.worstState,u=t.currentSubstep,l=t.substepCount,p=t.currentStep,f=!c&&s===T,h=!c&&s===P,d=!c&&s===k;return React.createElement("div",{className:"wrap types-wizard__container"},React.createElement("h1",{className:"wp-heading-inline"},Object(S.__)("Database Upgrade","wpcf")),React.createElement("p",{className:"wp-heading-description"},React.createElement("strong",null,Object(S.__)("Please don't leave this page.","wpcf")),React.createElement("br",null),React.createElement("br",null),Object(S.__)("Wait until the upgrade completes before making any changes on your site. This may take a few minutes.","wpcf")),React.createElement("div",{className:"types-wizard__body"},React.createElement("div",{className:"types-dialog__columns"},React.createElement("div",{className:"types-dialog__icon-area"},c&&React.createElement(U,{size:80}),!c&&React.createElement(z,{size:80})),React.createElement("div",{className:"types-dialog__content-area"},React.createElement("ol",{className:"types-step__list"},React.createElement(D,{label:Object(S.__)("Pre-migration site health check","wpcf"),stepState:o[0]}),React.createElement(D,{label:Object(S.__)("Dropping temporary database tables","wpcf"),stepState:o[1]}),React.createElement(D,{label:Object(S.__)("Creating new temporary database tables","wpcf"),stepState:o[2]}),React.createElement(D,{label:Object(S.__)("Migrating associations","wpcf"),stepState:o[3],estimation:c&&4===p&&React.createElement(F,{currentSubstep:u,substepCount:l})}),React.createElement(D,{label:Object(S.__)("Enabling maintenance mode","wpcf"),stepState:o[4]}),React.createElement(D,{label:Object(S.__)("Renaming database tables","wpcf"),stepState:o[5]}),React.createElement(D,{label:Object(S.__)("Updating the database layer mode","wpcf"),stepState:o[6]}),React.createElement(D,{label:Object(S.__)("Disabling maintenance mode","wpcf"),stepState:o[7]})),f&&React.createElement(_.Notice,{status:"success",isDismissible:!1},React.createElement("p",null,Object(S.__)("The upgrade was successful!","wpcf ")),React.createElement("p",{dangerouslySetInnerHTML:{__html:this.getYouCanVisitTroubleshootingPageText()}})),h&&React.createElement(_.Notice,{status:"warning",isDismissible:!1},React.createElement("p",null,Object(S.__)("The upgrade has finished with some warnings. This may be caused by small inconsistencies in the database and it most probably has no impact on your site. Please check technical details for more information.","wpcf ")),React.createElement("p",{dangerouslySetInnerHTML:{__html:this.getYouCanVisitTroubleshootingPageText()}})),d&&React.createElement(_.Notice,{status:"error",isDismissible:!1},React.createElement("p",{dangerouslySetInnerHTML:{__html:Object(S.sprintf)(Object(S.__)("An error has occurred during the upgrade. We have tried to return to the state before the upgrade started. If you encounter any issues, please contact the %s with the copy of the technical details you will find below.","wpcf"),'<a href="'+r+'">'+Object(S.__)("Toolset support forum","wpcf")+"</a>")}}),React.createElement("p",{dangerouslySetInnerHTML:{__html:this.getYouCanVisitTroubleshootingPageText()}})),React.createElement(x,{logOutput:i,shouldForceExpand:!c&&s!==T}),React.createElement("div",{className:"types-wizard__btn-wrapper"},(f||h)&&React.createElement(_.Button,{isLarge:!0,className:"toolset-button toolset-button-primary",onClick:function(){return window.location.href=n}},Object(S.sprintf)(Object(S.__)("Great! Go back to %s","wpcf"),a)),d&&React.createElement(React.Fragment,null,!0===this.props.showRetryStepButton&&React.createElement(_.Button,{isLarge:!0,isPrimary:!0,onClick:function(){return e.retryUpgrade()}},Object(S.__)("Retry failed step","wpcf")),!0==!this.props.showRetryStepButton&&React.createElement(_.Button,{isLarge:!0,isSecondary:!0,hidden:!0===this.props.retry,onClick:function(){return e.restartUpgrade()}},Object(S.__)("Restart Entire Migration","wpcf")),React.createElement(_.Button,{isLarge:!0,isTertiary:!0,onClick:function(){return window.open(r,"_blank")}},Object(S.__)("Go to support forum","wpcf"))))))))}},{key:"getYouCanVisitTroubleshootingPageText",value:function(){return e=Object(S.__)("You can also visit the %s page and remove the backup toolset_associations_old database table or perform a rollback to the state before the upgrade.","wpcf"),Object(S.sprintf)(e,'<a href="'+B.toolsetTroubleshootingURL+'" target="_blank">'+Object(S.__)("Toolset Troubleshooting","wpcf")+' <i class="fa fa-external-link " aria-hidden="true"></i></a>');var e}},{key:"startUpgrade",value:function(){this.updateSingleStepState(1,!0),this.doUpgrade(null,{}).then()}},{key:"retryUpgrade",value:function(){var e=this.props,t=e.nextState,r=e.newArgs,n=this.props,a=n.currentStep,o=n.lastWorstState,i=n.stepStates;i[a-1]={isRunning:!0,stepState:L},this.props.setState({stepStates:i,worstState:o,showRetryStepButton:!1}),this.doUpgrade(t,r)}},{key:"restartUpgrade",value:(t=l()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.setState(Z());case 2:this.appendToLog(Object(S.__)("Retrying the database upgrade...","wpcf")),this.startUpgrade(),this.forceUpdate();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidMount",value:function(){var e=this;WPV_Toolset.Utils.setConfirmUnload((function(){return e.props.isUpgradeRunning}),null,""),this.startUpgrade()}},{key:"ajaxCall",value:function(e,t){var r=this.props,n=r.ajaxActionName,a=r.nonce,o=new window.FormData;return o.append("action",n),o.append("wpnonce",a),o.append("migrationState",e),t.batch_size||(t.batch_size=this.props.batchSize),o.append("args",JSON.stringify(t)),window.fetch(window.ajaxurl,{method:"POST",body:o,credentials:"same-origin"})}},{key:"doUpgrade",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ajaxCall(t||"",r).then((function(e){return e.ok?e.text().then((function(e){try{return JSON.parse(e)}catch(e){return{success:!1,message:Object(S.__)("An error has occurred while parsing the server response:","wpcf")+" "+e.message}}})):{success:!1,message:e.statusText,timeout:504===parseInt(e.status)}})).then((function(t){if(!("data"in t)||!("success"in t))return t.timeout&&4===e.props.currentStep?e.handleRetry(W({success:!1},t)):e.handleError(W({success:!1},t));if(!t.success)return e.handleError(t.data);var r=t.data,n=r.previousStepStatus,a=r.previousStepNumber,o=r.hasNextStep,i=r.nextStepNumber,c=r.nextState,s=r.message,u=r.args,l=r.currentSubstep,p=r.substepCount,f=r.wpnonce;return u.batch_size=e.props.batchSize,e.props.setState({currentSubstep:parseInt(l),substepCount:parseInt(p),nonce:f,nextState:c,newArgs:u,showRetryStepButton:!1,lastBatchSize:e.props.batchSize}),e.updateStateByUpgradeStep(n,a,s,i,o),o?e.doUpgrade(c,u):t}))}},{key:"handleError",value:function(e){this.updateStateByUpgradeStep(null,null,e.message?e.message:Object(S.__)("An error has occurred during the upgrade. Please contact our technical support.","wpcf"),null,!1,!1)}},{key:"handleRetry",value:function(e){if(!this.props.showRetryStepButton){if(!this.props.lastBatchSize||this.props.lastBatchSize>1){var t=this.props,r=t.nextState,n=t.newArgs,a=this.props.lastBatchSize?this.props.lastBatchSize:this.props.batchSize,o=Math.ceil(a/2);return n.batch_size=o,this.props.setState({lastBatchSize:o}),this.appendToLog(Object(S.__)("Retrying the last step with a smaller batch (%d)  due to gateway error...","wpcf").replace("%d",o)),this.doUpgrade(r,n)}this.props.setState({showRetryStepButton:!0,lastBatchSize:null})}this.handleError(e)}},{key:"updateStateByUpgradeStep",value:function(e,t,r,n,a){var o=this,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=this.props.currentStep;this.appendToLog(r);var s=parseInt(t||c),u=i&&!!n&&s<n,p=a&&i,f=i?this.stateResponseToState(e):k;u?(l()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.updateSingleStepState(s,!1,f);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))().then(),this.updateSingleStepState(n,!0)):p?this.updateSingleStepState(s,!0,f):(this.updateSingleStepState(s,!1,f),this.props.setState({isUpgradeRunning:!1}))}},{key:"appendToLog",value:function(e){var t=this.props.logOutput;this.props.setState({logOutput:t+"\n> "+e})}},{key:"stateResponseToState",value:function(e){return e?C[e]:null}},{key:"updateSingleStepState",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.props,a=n.currentStep,o=n.worstState,i=n.stepStates,c=e-1,s=i[c].stepState,u=Math.max(r||s,s);i[c]={isRunning:t,stepState:u},this.props.setState({stepStates:i,currentStep:t?e:a,worstState:o<u?u:o,lastWorstState:o})}}]),n}(b.Component),J=Object(w.compose)(Object(w.withState)(W({logOutput:"> "+Object(S.__)("The upgrade process is starting...","wpcf")},Z())))(Y),K=r(10),X=r.n(K),q=(r(26),window.toolsetTypesDatabaseUpgradePageL10n),Q=function(){function e(){a()(this,e)}return i()(e,[{key:"init",value:function(){X.a.render(React.createElement(J,{isWpmlActive:q.isWpmlActiveAndConfigured,ajaxActionName:q.ajaxActionName,nonce:q.nonce,batchSize:q.batchSize,supportForumURL:q.supportForumURL,returnToUrl:q.returnToUrl,returnToTitle:q.returnToTitle}),document.getElementById(q.anchorId))}}]),e}();document.addEventListener("DOMContentLoaded",(function(){(new Q).init()}))}]);