!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=30)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},,function(t,e,n){var o=n(11);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}},function(t,e,n){var o=n(12),r=n(9);t.exports=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?r(t):e}},function(t,e){t.exports=window.wp.components},,,function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=ReactDOM},function(t,e){function n(e,o){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,o)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},,,,,,,function(t,e,n){},,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var o=n(10),r=n.n(o),i=n(0),c=n.n(i),a=n(1),s=n.n(a),u=n(4),l=n.n(u),p=n(5),d=n.n(p),f=n(2),y=n.n(f),m=n(6);function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d()(this,n)}}var b=wp.element.Component,v=wp.i18n.__,_=WPV_Toolset||{},g=function(t){window.location=_.Utils.updateUrlQuery("toolset-switch-to-classic-editor",t?"revert_to_previous_content":"keep_current_content",_.Utils.updateUrlQuery("toolset-switch-to-block-editor"))},w=function(t){l()(n,t);var e=h(n);function n(t){var o;return c()(this,n),(o=e.call(this,t)).state={isOpen:!1},o}return s()(n,[{key:"render",value:function(){var t=this;return React.createElement("div",null,React.createElement(m.Button,{isSecondary:!0,"data-toolbar-item":!0,onClick:function(){return t.setState({isOpen:!0})}},v("Use Classic Editor","wpcf")),this.state.isOpen?React.createElement(m.Modal,{className:"types-editor-switch",title:v("Use Classic Editor","wpcf"),onRequestClose:function(){return t.setState({isOpen:!1})}},_.Utils.getParameterByName("post")?React.createElement("div",null,React.createElement("p",{className:"types-editor-switch__lead"},v("If you've encountered problems using the Block Editor, you can switch to the Classic one.","wpcf")),React.createElement("p",null,v("You can either revert to the post content before you started using the Block Editor, or you can keep the current post content (which will most probably include HTML comments added by the Block Editor).","wpcf")),React.createElement("p",null,v("Please note that reverting the post content to its previous state cannot be undone if the current post type doesn't have post revisions.","wpcf")),React.createElement("div",{className:"types-editor-switch__buttons"},React.createElement(m.Button,{isDefault:!0,className:"types-editor-switch__buttons-cancel",onClick:function(){return t.setState({isOpen:!1})}},v("Cancel","wpcf")),React.createElement(m.Button,{isPrimary:!0,onClick:function(){return g(!0)}},v("Revert to post content before Block Editor","wpcf")),React.createElement(m.Button,{isPrimary:!0,onClick:function(){return g(!1)}},v("Keep current content","wpcf")))):React.createElement("div",null,React.createElement("p",{className:"types-editor-switch__lead"},v("Please save your post first before switching the editor mode.","wpcf")))):null)}}]),n}(b);n(19);jQuery((function(){var t=wp.data.select("core/editor");if(t)var e=t.getCurrentPostId,n=types_post_add_or_edit_l10n||{},o=setInterval((function(){var t=jQuery("#editor.block-editor__container");0===t.length&&i(),0!==t.find(".edit-post-header-toolbar").length&&(n.editorMode&&"per_post"===n.editorMode&&function(){var t=jQuery("#editor.block-editor__container .edit-post-header-toolbar");if(0!==t.length){var e="types-switch-to-classic-editor-button-placeholder";t.append('<div id="'.concat(e,'"></div>')),r.a.render(React.createElement(w,null),document.querySelector("#"+e))}}(),n.needsReloadAfterSaving&&jQuery(document).on("click",".edit-post-header__settings .editor-post-publish-button, .edit-post-header__settings .editor-post-save-draft, .edit-post-header__settings .editor-post-publish-panel__toggle",(function(){var t=setInterval((function(){var o=wp.data.select("core/editor");if(!o.isSavingPost()&&!o.isAutosavingPost()&&o.didPostSaveRequestSucceed()){clearInterval(t);var r=document.getElementById("types_displayed_field_group_slugs"),i=r?JSON.parse(r.innerHTML):{},c=Object.keys(i).map((function(t){return i[t]})),a={action:n.reevaluateFieldGroup.actionName,wpnonce:n.reevaluateFieldGroup.nonce,postId:e(),displayedFieldGroups:c};jQuery.post({async:!0,url:window.ajaxurl,data:a,success:function(t){t.hasOwnProperty("data")&&t.data.hasOwnProperty("fieldGroupsChanged")&&t.data.fieldGroupsChanged&&wp.data.dispatch("core/notices").createNotice("warning",n.strings.displayConditionsMightHaveChanged,{isDismissible:!0,actions:[{url:"",label:n.strings.reloadPage}]})}})}}),1e3)})),function(){var t=document.querySelectorAll(".editor-post-publish-button, .editor-post-publish-panel__toggle");if(!t.length)return!1;for(var e=0;e<t.length;e++)t[e].addEventListener("click",(function(){jQuery("form#post, form.metabox-location-normal, form.metabox-location-advanced").each((function(){Toolset.Types.SubmitAnyway.onsubmit(this)}))}))}(),tinymce.EditorManager.editors.forEach((function(t){t.id.startsWith("wpcf-")&&setTimeout((function(){var e=tinymce.settings;tinymce.settings=t.settings,tinymce.EditorManager.execCommand("mceRemoveEditor",!1,t.id),tinymce.EditorManager.execCommand("mceAddEditor",!1,t.id),tinymce.settings=e}),1e3)})),i())}),1),i=function(){clearInterval(o)}}))}]);